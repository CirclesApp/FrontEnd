(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96fe2298"],{4070:function(e,t,i){"use strict";var n=i("59d2"),a=i.n(n);a.a},"59d2":function(e,t,i){},d2bf:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editclub"},[i("div",{staticClass:"editclub__title"},[e._v("동아리 관리")]),i("div",{staticClass:"editclub__wrapper"},[i("label",{staticClass:"editclub__imgbox",class:{"editclub__imgbox-ondrag":e.isOnDragOver},on:{drop:e.onImageDrop,dragover:e.onImageDropOver,dragleave:function(t){e.isOnDragOver=!1}}},[i("img",{attrs:{src:e.getClubImage,alt:"club_logo"}}),i("p",[i("b",[i("input",{attrs:{type:"file"},on:{change:e.onImageChange}}),e._v(" 동아리 이미지 수정 ")]),e._v("하기 "),i("br"),e._v("또는 "),i("b",[e._v("드래그 앤 드롭")]),e._v("으로 이미지 업로드 ")])]),i("div",{staticClass:"editclub__content"},[i("div",{staticClass:"inputfield"},[i("h4",[e._v("동아리 이름")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"inputfield__input",attrs:{type:"text",placeholder:"동아리 이름을 입력하세요"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),i("div",{staticClass:"inputfield"},[i("h4",[e._v("소속 학교")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.school,expression:"school"}],staticClass:"inputfield__input",attrs:{type:"text",placeholder:"소속 학교를 입력하세요"},domProps:{value:e.school},on:{input:function(t){t.target.composing||(e.school=t.target.value)}}})]),i("div",{staticClass:"inputfield"},[i("h4",[e._v("동아리 소개")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.introduction,expression:"introduction"}],staticClass:"inputfield__input",attrs:{type:"text",placeholder:"동아리 소개를 입력하세요"},domProps:{value:e.introduction},on:{input:function(t){t.target.composing||(e.introduction=t.target.value)}}})]),i("div",{staticClass:"action"},[i("button",{staticClass:"delete",class:{"delete-active":e.deleteClubName==e.name},on:{click:function(t){e.isDeleteAble=!0}}},[e.isOwner?i("span",{on:{click:e.deleteClub}},[e._v("동아리 폐쇄")]):e._e(),e.isDeleteAble?i("input",{attrs:{type:"text",placeholder:"동아리 명 확인"},on:{input:function(t){e.deleteClubName=t.target.value}}}):e._e()]),i("button",{staticClass:"save",on:{click:e.save}},[e._v("저장")])])])])])},a=[],s=(i("a481"),i("7f7f"),i("2b0e")),o=s["a"].extend({data:function(){return{imageFile:{},imageFileBase64:"",isOnDragOver:!1,name:"",school:"",introduction:"",isDeleteAble:!1,deleteClubName:""}},created:function(){this.name=this.getClub.name,this.school=this.getClub.school,this.introduction=this.getClub.introduction},methods:{onImageChange:function(e){this.imageFile=e.target.files[0]},onImageDrop:function(e){e.preventDefault();var t=e.dataTransfer.files[0];t&&(this.imageFile=t),this.isOnDragOver=!1},onImageDropOver:function(e){this.isOnDragOver=!0,e.preventDefault()},encodeBase64ImageFile:function(e){return new Promise((function(t,i){if(!e)return t("");var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){t(e.target.result)},n.onerror=function(e){i(e)}}))},save:function(){var e=this;this.name.trim().length>0&&this.school.trim().length>0&&this.introduction.trim().length>0&&(this.$store.commit("pushLoading",{name:"CLUB_MODIFICATION",message:"동아리 사이트 수정 중"}),this.$store.dispatch("CLUB_MODIFICATION",{name:this.name,school:this.school,introduction:this.introduction}).then((function(t){e.$store.commit("clearLoading","CLUB_MODIFICATION"),e.$store.commit("showNotice","동아리 정보 수정 성공"),e.imageFileBase64?(e.$store.commit("pushLoading",{name:"SET_CLUB_IMAGE",message:"동아리 사이트 수정 중"}),e.$store.dispatch("SET_CLUB_IMAGE",{img:e.imageFileBase64}).then((function(t){e.$store.commit("clearLoading","SET_CLUB_IMAGE"),e.$router.replace("/".concat(e.name,"/community/editclub"))})).catch((function(e){return console.dir(e)}))):e.$router.replace("/".concat(e.name,"/community/editclub"))})).catch((function(e){return console.dir(e)})))},deleteClub:function(){var e=this;this.deleteClubName==this.name&&(this.$store.commit("pushLoading",{name:"CLUB_DELETE",message:"동아리 사이트 수정 중"}),this.$store.dispatch("CLUB_DELETE",{name:this.name,school:this.school,introduction:this.introduction}).then((function(t){e.$store.commit("clearLoading","CLUB_DELETE"),e.$store.commit("setClub",{}),e.$router.replace("/")})).catch((function(e){return console.dir(e)})))}},watch:{imageFile:function(){var e=this;this.imageFile&&(this.$store.commit("pushLoading",{name:"encodeBase64ImageFile",message:"동아리 사이트 수정 중"}),this.encodeBase64ImageFile(this.imageFile).then((function(t){e.imageFileBase64=t,e.$store.commit("clearLoading","encodeBase64ImageFile")})))}},computed:{getClubImage:function(){return this.imageFileBase64?this.imageFileBase64:this.$store.state.club.imgPath?this.$store.state.mainPath+this.$store.state.club.imgPath:"https://pbs.twimg.com/profile_images/770139154898382848/ndFg-IDH_400x400.jpg"},getClub:function(){return this.$store.state.club},isOwner:function(){return this.getClub.owner==this.$store.state.userInformation._id}}}),c=o,r=(i("4070"),i("2877")),l=Object(r["a"])(c,n,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-96fe2298.d5c498f6.js.map